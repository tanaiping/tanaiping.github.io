/*! Lity - LiquidThemes Modification - v3.0.0-dev - 2020-11-02
 * http://sorgalla.com/lity/
 * Copyright (c) 2015-2020 Jan Sorgalla; Licensed MIT */
!function(e,t){"function"==typeof define&&define.amd?define(["jquery"],(function(n){return t(e,n)})):"object"==typeof module&&"object"==typeof module.exports?module.exports=t(e,require("jquery")):e.lity=t(e,e.jQuery||e.Zepto)}("undefined"!=typeof window?window:this,(function(e,t){"use strict";function n(e){var t=E();return O&&e.length?(e.one(O,t.resolve),setTimeout(t.resolve,500)):t.resolve(),t.promise()}function i(e,n,i){if(1===arguments.length)return t.extend({},e);if("string"==typeof n){if(void 0===i)return void 0===e[n]?null:e[n];e[n]=i}else t.extend(e,n);return this}function r(e){var t=e.indexOf("?");t>-1&&(e=e.substr(t+1));for(var n=decodeURI(e.split("#")[0]).split("&"),i={},r,o=0,a=n.length;o<a;o++)n[o]&&(i[(r=n[o].split("="))[0]]=r[1]);return i}function o(e,n){if(!n)return e;if("string"===t.type(n)&&(n=r(n)),e.indexOf("?")>-1){var i=e.split("?");e=i.shift(),n=t.extend({},r(i[0]),n)}return e+"?"+t.param(n)}function a(e,t){var n=e.indexOf("#");return-1===n?t:(n>0&&(e=e.substr(n)),t+e)}function l(e,t,n,i){return t&&t.element().addClass("lity-iframe"),n&&(e=o(e,n)),i&&(e=a(i,e)),'<div class="lity-iframe-container"><iframe frameborder="0" allowfullscreen allow="autoplay; fullscreen" src="'+e+'"/></div>'}function s(e){return t('<span class="lity-error"></span>').append(e)}function d(e,n){var i=n.opener()&&n.opener().data("lity-desc")||"Image with no description",r=t('<img src="'+e+'" alt="'+i+'"/>'),o=E(),a=function(){o.reject(s("Failed loading image"))};return r.on("load",(function(){if(0===this.naturalWidth)return a();o.resolve(r)})).on("error",a),o.promise()}function c(e,n){var i,r,o;try{i=t(e)}catch(e){return!1}return!!i.length&&(r=t('<i style="display:none !important"></i>'),o=i.hasClass("lity-hide"),n.element().one("lity:remove",(function(){r.before(i).remove(),o&&!i.closest(".lity-content").length&&i.addClass("lity-hide")})),i.removeClass("lity-hide").after(r))}function u(e,t){return l(e,t)}function f(){return w.documentElement.clientHeight?w.documentElement.clientHeight:Math.round(C.height())}function y(e){var t=v();t&&(27===e.keyCode&&t.options("esc")&&t.close(),9===e.keyCode&&p(e,t))}function p(e,t){var n=t.element().find(D),i=n.index(w.activeElement);e.shiftKey&&i<=0?(n.get(n.length-1).focus(),e.preventDefault()):e.shiftKey||i!==n.length-1||(n.get(0).focus(),e.preventDefault())}function h(){t.each(k,(function(e,t){t.resize()}))}function m(e){1===k.unshift(e)&&(j.addClass("lity-active"),C.on({resize:h,keydown:y}))}function v(){return 0===k.length?null:k[0]}function g(e,n,i,r){var o="inline",a,l=t.extend({},i);return r&&l[r]?(a=l[r](e,n),o=r):(console.log(l),t.each(["inline","iframe"],(function(e,t){delete l[t],l[t]=i[t]})),t.each(l,(function(t,i){return!i||(!(!i.test||i.test(e,n))||(!1!==(a=i(e,n))?(o=t,!1):void 0))}))),{handler:o,content:a||""}}function x(e,r,o,a){function l(e){p=t(e).css("max-height",f()+"px"),y.find(".lity-loader").each((function(){var e=t(this);n(e).always((function(){e.remove()}))})),y.removeClass("lity-loading").find(".lity-content").empty().append(p),c=!0,p.trigger("lity:ready",[s])}var s=this,d,c=!1,u=!1,y,p;r=t.extend({},T,r),y=t(r.template),s.element=function(){return y},s.opener=function(){return o},s.content=function(){return p},s.options=t.proxy(i,s,r),s.handlers=t.proxy(i,s,r.handlers),s.resize=function(){c&&!u&&p.css("max-height",f()+"px").trigger("lity:resize",[s])},s.close=function(){if(c&&!u){u=!0;var e=E();if(a&&(w.activeElement===y[0]||t.contains(y[0],w.activeElement)))try{a.focus()}catch(e){}return p.trigger("lity:close",[s]),y.removeClass("lity-opened lity-iframe").addClass("lity-closed"),n(p.add(y)).always((function(){p.trigger("lity:remove",[s]),y=void 0,e.resolve()})),e.promise()}},d=g(e,s,r.handlers,r.handler),y.addClass("lity-loading lity-opened lity-"+d.handler).removeClass("lity-closed").focus().on("click","[data-lity-close]",(function(e){t(e.target).is("[data-lity-close]")&&s.close()})).trigger("lity:open",[s]),m(s),t.when(d.content).always(l)}function b(e,n,i){e.preventDefault?(e.preventDefault(),e=(i=t(this)).data("lity-target")||i.attr("href")||i.attr("src")):i=t(i);var r=new x(e,t.extend({},i.data("lity-options")||i.data("lity"),n),i,w.activeElement);if(!e.preventDefault)return r}var w=e.document,C=t(e),E=t.Deferred,j=t("html"),k=[],D='a[href],area[href],input:not([disabled]),select:not([disabled]),textarea:not([disabled]),button:not([disabled]),iframe,object,embed,[contenteditable],[tabindex]:not([tabindex^="-"])',T={esc:!0,handler:null,handlers:{image:d,inline:c,iframe:u},template:".lity"},z=/(^data:image\/)|(\.(png|jpe?g|gif|svg|webp|bmp|ico|tiff?)(\?\S*)?$)/i,O=function(){var e=w.createElement("div"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var n in t)if(void 0!==e.style[n])return t[n];return!1}();return d.test=function(e){return z.test(e)},b.version="@VERSION",b.options=t.proxy(i,b,T),b.handlers=t.proxy(i,b,T.handlers),b.current=v,b.iframe=l,t(w).on("click.lity","[data-lity]",b),b}));